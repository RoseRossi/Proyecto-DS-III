#
# @autor: Cristian Machado <cristian.machado@correounivalle.edu.co>
# @copyrigth: 2024
# @license: GPL-3.0
#

# version: '3.8'

services:
  # Microservice ms_reviews
  ms_reviews:
    build:
      context: ms-reviews
      dockerfile: Dockerfile
    ports:
     - "5000:5000"
    environment:
      - MONGO_URI=mongodb://ms_reviews_db:27017/reviews
    depends_on:
      - ms_reviews_db

  ms_reviews_db:
    image: mongo:4.4
    ports:
      - "27017:27017"
    volumes:
      - mongo-data:/data/db


  orchestrator:
    build:
      context: orchestrator
      dockerfile: Dockerfile
    ports:
      - "4800:4800"

# Persistence
volumes:
  ms_user_db_data:
  ms_products_db_data:
  mongo-data:
  mongo-data-sales:
  mysql-data:
  mysql-data-repairs: