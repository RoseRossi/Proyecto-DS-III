#
# @autor: Cristian Machado <cristian.machado@correounivalle.edu.co>
# @copyrigth: 2024
# @license: GPL-3.0
#

# version: '3.8'

services:

  # Microservice ms_spare-parts
  ms_spare_parts:
    build:
      context: ms-spare-parts
      dockerfile: Dockerfile
    ports:
     - "3005:3005"
    environment:
      DB_HOST: ms_spare_parts_db
      DB_USER: root
      DB_PASSWORD: osiris2016
      DB_PORT: 3306
      DB_DATABASE: inventario
    depends_on:
      - ms_spare_parts_db

  ms_spare_parts_db:
    image: mysql:5.7
    ports:
      - "3306:3306"
    environment:
      MYSQL_ROOT_PASSWORD: osiris2016
    volumes:
      - mysql-data:/var/lib/mysql
      - ./ms-spare-parts/db/database.sql:/docker-entrypoint-initdb.d/init.sql

  
  orchestrator:
    build:
      context: orchestrator
      dockerfile: Dockerfile
    ports:
      - "4800:4800"

# Persistence
volumes:
  ms_user_db_data:
  ms_products_db_data:
  mongo-data:
  mongo-data-sales:
  mysql-data:
  mysql-data-repairs: